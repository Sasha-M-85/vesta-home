
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ö–ª–∏–µ–Ω—Ç—ã</title>
  <script src="supabase.js"></script>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    h1 { margin-bottom: 20px; }
    input { margin-right: 10px; padding: 5px; }
    button { padding: 5px 10px; }
    ul { margin-top: 20px; padding-left: 0; list-style: none; }
    li { padding: 5px 0; border-bottom: 1px solid #ccc; }
    .nav { margin-bottom: 20px; }
  </style>
</head>
<body>
  <div class="nav">
    <a href="home.html">üè† –ì–ª–∞–≤–Ω–∞—è</a>
  </div>
  <h1>–ö–ª–∏–µ–Ω—Ç—ã</h1>
  <input type="text" id="nameInput" placeholder="–ò–º—è –∫–ª–∏–µ–Ω—Ç–∞">
  <input type="text" id="phoneInput" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
  <button onclick="addClient()">–î–æ–±–∞–≤–∏—Ç—å</button>

  <ul id="clients-list"></ul>

  <script>
    const supabaseUrl = 'https://rincxoalnhfsnwgwxrfb.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJpbmN4b2Fsbmhmc253Z3d4cmZiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2MjE2MzMsImV4cCI6MjA2OTE5NzYzM30.95JhUW9uRbcHSkFCXyh40acSAAnJIj3nbUICQGqW32Y';
    const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

    async function loadClients() {
      const { data, error } = await supabase.from('clients').select('*');
      if (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤:', error);
        alert("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤");
        return;
      }

      const list = document.getElementById('clients-list');
      list.innerHTML = '';
      data.forEach(client => {
        const li = document.createElement('li');
        li.textContent = `${client.name} ‚Äî ${client.phone}`;
        list.appendChild(li);
      });
    }

    async function addClient() {
      const name = document.getElementById('nameInput').value.trim();
      const phone = document.getElementById('phoneInput').value.trim();

      if (!name || !phone) return alert("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ —Ç–µ–ª–µ—Ñ–æ–Ω");

      const { error } = await supabase.from('clients').insert([{ name, phone }]);
      if (error) {
        console.error('–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞:', error);
        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏");
        return;
      }

      document.getElementById('nameInput').value = '';
      document.getElementById('phoneInput').value = '';
      await loadClients();
    }

    window.onload = loadClients;
  </script>
</body>
</html>
